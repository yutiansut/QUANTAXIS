# 回测时所用数据及方法声明:
2017-08-17

## 复权方式及说明


- 尽量采用 收益前复权算法才匹配真实的情况

- 尽量不使用后复权算法 因为后复权算法的起始日不一样导致结果偏差较大

- 免费能用的数据源里面 都没有复权的分钟线api 能拿到的仅有除权的



清洗和对比了  同花顺,wind,通达信,腾讯财经,搜狐财经,新浪财经,凤凰网财经等的数据我们发现:

1. 同花顺,通达信的前复权 质量不高 数据会出现负数

2. ifeng 凤凰网数据 经常出错  前复权和同花顺也对不上  不清楚前复权数据来源

3. 腾讯财经 

    - 前复权数据质量较好,偶尔有数据缺失(600016 2007-09-04 前复权)
    - 前复权算法基本和wind涨跌幅算法一致

    - 后复权结果和wind后复权不一致 可能是由于复权的初始点问题导致

4. wind  免费数据源拿不全数据,机构版可以

鉴于网上并没有一份免费且靠谱的复权因子,而且常规开源数据源并没有昨收选项导致无法按照涨跌幅算法计算前复权

## 我们最终选用:

腾讯财经的前复权和不复权数据作为日线数据库

通达信的1,5,15,30,60 分钟线作为分钟数据库 (通达信分钟线并没有复权)

通达信的数据 最多只能获取20800条 受限于通达信软件内部行情窗口最大值,所以 

- 1分钟线前推2w条 只能拿4个月左右  

- 5分钟线前推2w条 在将近10个月左右

- 15分钟,30分钟,60分钟线 均只能拿到2年的数据


## 关于数据保存和更新的说明:

1. 由于无法找到正确且免费的复权因子api,只能选择在第一次保存数据的时候,保存不复权数据和用当时的前复权数据算出的(前复权/不复权)指标

2. 分钟线的复权  取不复权数据*日线的(前复权/不复权指标)

3. 当数据更新的时候,会对比1年周期的前复权/不复权指标 如果发生配股,送股,分红等影响到前复权序列时, 按比例去重新计算前复权/不复权指标

